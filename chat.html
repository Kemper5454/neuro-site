<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ИИ Менеджер Treeda</title>
    <link rel="stylesheet" href="./chat/chat.css" />
    <link rel="icon" href="./images/favicon.png" type="image/png">
</head>

<body>
    <div class="chat-title">
        <h1>ОБЩАЙСЯ КАК<br />С ЧЕЛОВЕКОМ</h1>
    </div>

    <div class="chat-container">
        <div class="chat-header">ИИ Агент</div> <!-- новый заголовок -->
        <div id="chat">
            <div class="chat-messages-wrapper">
                <div class="chat-messages"></div>
            </div>
        </div>
        <div id="chat-toggle-button" class="mobile-only">
            <button id="expand-chat">Спросите что-нибудь...</button>
        </div>
        <div id="chat-close-button" class="mobile-only hidden">✖</div>
        <form id="input-form">
            <textarea id="input" placeholder="Спросите что-нибудь..." required></textarea>
            <button type="submit">➤</button>
        </form>
    </div>
    <script type="module" src="./chat/chat.js"></script>
        <script>
const prevSessionTimeKey = 'previousSessionTime';

function formatTime(seconds) {
  const h = Math.floor(seconds / 3600);
  const m = Math.floor((seconds % 3600) / 60);
  const s = seconds % 60;
  return `${h}ч ${m}м ${s}с`;
}

// При загрузке страницы — показать время предыдущей сессии (если есть)
const prevSessionSeconds = parseInt(localStorage.getItem(prevSessionTimeKey), 10);
if (!isNaN(prevSessionSeconds) && prevSessionSeconds > 0) {
  console.log(`Время предыдущей сессии: ${formatTime(prevSessionSeconds)}`);
} else {
  console.log('Информация о предыдущей сессии отсутствует');
}

const enterTime = Date.now();

// Каждую секунду выводим в консоль текущую сессию
setInterval(() => {
  const now = Date.now();
  const seconds = Math.floor((now - enterTime) / 1000);
  console.log(`Текущая сессия: ${formatTime(seconds)}`);
}, 1000);

// При уходе сохраняем длительность сессии
window.addEventListener('beforeunload', () => {
  const leaveTime = Date.now();
  const totalSeconds = Math.floor((leaveTime - enterTime) / 1000);
  localStorage.setItem(prevSessionTimeKey, totalSeconds);
});
</script>
</body>

</html>